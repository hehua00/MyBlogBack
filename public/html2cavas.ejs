<!DOCTYPE html>
<html lang="en" style="font-size: 100px;">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <style type="text/css">
     /*img{
      width: 100px;
      height: 200px;
     }*/
     body{
      font-size: .14rem;  
     }
     #earsContainer{
      /*width: 300px;*/
      /*zoom: 0.5;*/
      /*height: 100px;*/
     }
     #pic{
      width: 3.75rem;
      height:2.6rem;
     }
     canvas{
      border: 10px solid red;
     }
     /*.targetElem {width: 54px;height: 142px;margin-top:2px;margin-left:17px;transform: scale(0.5)}*/
  </style>
</head>
<body>
    <div id="earsContainer">
        <h2>HTML2CAVASE11111111</h2>
        <img id='pic' src="http://127.0.0.1:8888/2.jpg">
    </div>
    <button id="btn">下载</button>
  <script type="text/javascript" src="./html2canvas.js"></script>
  <script type="text/javascript">


    var w = document.querySelector('#earsContainer').clientWidth ; //这是我们准备画的div
    var h =  document.querySelector('#earsContainer').clientHeight ;
    // console.log(w);
    document.getElementById("btn").onclick=function(){
      var canvas = document.createElement("canvas");
      var scale = window.devicePixelRatio;
      // canvas.width = w * scale;
      // canvas.height = h * scale;
      canvas.setAttribute('width', w * scale);
      canvas.setAttribute('height', h * scale);
      canvas.style.width = w + 'px';
      canvas.style.height = h + 'px';


      var context = canvas.getContext("2d");

      context.mozImageSmoothingEnabled = false;
      context.webkitImageSmoothingEnabled = false;
      context.msImageSmoothingEnabled = false;
      context.imageSmoothingEnabled = false;
      // context.translate(0.5, 0.5);
    html2canvas(document.querySelector('#earsContainer'),{ // $(".myImg")是你要复制生成canvas的区域，可以自己选
        onrendered:function(canvas){
              dataURL =canvas.toDataURL("image/png");
              var img=new Image();
              img.src=dataURL;
              img.width=canvas.width;
              img.height=canvas.height;
              document.body.appendChild(img);
          },
           scale: scale,
           // canvas: canvas,
           logging: false, 
           // ,
          useCORS :true,
           // width:w,
           // height:h*scale
      });










};

















  </script>
</body>
</html>